"Resource" import "/snavig/basic-axioms.txt".

A map-direction is a kind of object.
A north is a kind of map-direction.
A south is a kind of map-direction.
An east is a kind of map-direction.
A west is a kind of map-direction.

A northwest is a kind of map-direction.
A northeast is a kind of map-direction.
A southwest is a kind of map-direction.
A southeast is a kind of map-direction.

A zenith is a kind of map-direction.
A nadir is a kind of map-direction.

A map-direction's opposite-direction must be a map-direction.
A map-direction must have an opposite-direction.
If a map-direction is another map-direction's opposite-direction, then equivalently
 the second map-direction is the first map-direction's opposite-direction.

There is a north.
There is a south.
The north is the south's opposite-direction.

There is an east.
There is a west.
The east is the west's opposite-direction.

There is a northwest.
There is a southeast.
The northwest is the southeast's opposite-direction.

There is a northeast.
There is a southwest.
The southwest is the northeast's opposite-direction.

There is a zenith.
There is a nadir.
The zenith is the nadir's opposite-direction.

A map-place is a kind of location.
A map-place's place-description must be an spc-string.
A map-connection is a kind of describable-entity.
A straight-connection is a kind of map-connection.

A map-place's map-neighbor must be a map-place.
If a map-place is another map-place's map-neighbor, then equivalently
 the second map-place is the first map-place's map-neighbor.

A map-connection's source-place must be a map-place.
A map-connection's target-place must be a map-place.

A map-place's place-exit must be a map-connection.
A map-place's place-entrance must be a map-connection.

A map-connection must have a source-place.
A map-connection must have a target-place.

A map-connection's opposite-connection must be a map-connection.
A map-connection may have an opposite-connection.
If a map-connection is another map-connection's opposite-connection, then equivalently
 the second map-connection is the first map-connection's opposite-connection.

If a map-place is a map-connection's source-place, then equivalently
 the map-connection is the map-place's place-exit.
If a map-place is a map-connection's target-place, then equivalently
 the map-connection is the map-place's place-entrance.

If a map-connection opposes a map-place to a map-direction, then equivalently
 the map-place's place-exit in the map-direction is
  the map-connection's opposite-connection.

When a map-place faces a destination-place to a map-direction,
 the map-place has a place-exit in the map-direction;
 also the destination-place has a place-exit in the map-direction's opposite-direction;
 also the map-place's place-exit in the map-direction becomes a straight-connection;
 also the destination-place's place-exit in the map-direction's opposite-direction
  becomes a straight-connection;
 also the map-place's place-exit in the map-direction opposes
  the destination-place to the map-direction's opposite-direction;
 also the map-place becomes the destination-place's map-neighbor.

If a map-place faces a destination-place to a map-direction, then equivalently
 (the map-place's place-exit in the map-direction)'s
  target-place is the destination-place.
If a map-place faces a destination-place to a map-direction, then equivalently
 (the destination-place's place-exit in the map-direction's opposite-direction)'s
  target-place is the map-place.

If a map-place is north of a neighbor-place, then equivalently
 the neighbor-place faces the map-place to the north.
If a map-place is south of a neighbor-place, then equivalently
 the neighbor-place faces the map-place to the south.
If a map-place is east of a neighbor-place, then equivalently
 the neighbor-place faces the map-place to the east.
If a map-place is west of an neighbor-place, then equivalently
 the neighbor-place faces the map-place to the west.

If a map-place is northeast of a neighbor-place, then equivalently
 the neighbor-place faces the map-place to the northeast.
If a map-place is northwest of a neighbor-place, then equivalently
 the neighbor-place faces the map-place to the northwest.
If a map-place is southeast of a neighbor-place, then equivalently
 the neighbor-place faces the map-place to the southeast.
If a map-place is southwest of a neighbor-place, then equivalently
 the neighbor-place faces the map-place to the southwest.

If a map-place is above a neighbor-place, then equivalently
 the neighbor-place faces the map-place to the zenith.
If a map-place is below a neighbor-place, then equivalently
 the neighbor-place faces the map-place to the nadir.

A door is a kind of describable-entity.
A map-connection's exit-door must be a door.
A door's door-exit must be a map-connection.
A map-connection may have an exit-door.
If a door is a map-connection's exit-door, then equivalently
 the map-connection is the door's door-exit.
A door must be open or closed.

When a door mediates a map-connection,
 the door becomes the map-connection's exit-door;
 also the door becomes the map-connection's opposite-connection's exit-door.

When a door connects a map-place to a neighbor-place,
 the door mediates (the map-place's place-entrances
  among the neighbor-place's place-exits).
