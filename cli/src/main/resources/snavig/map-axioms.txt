"Resource" import "/snavig/basic-axioms.txt".

A map-place is a kind of location.
A map-place's place-description must be a quotation.
A map-connection is a kind of describable-entity.
A map-neighbor must be a map-place.
A map-place may have map-neighbors.
A map-place with a map-neighbor is a map-neighbor.

A southward-passage is a kind of map-connection.
A northward-passage is a kind of map-connection.
A westward-passage is a kind of map-connection.
An eastward-passage is a kind of map-connection.

A source-place must be a map-place.
A target-place must be a map-place.

A place-exit must be a map-connection.
A place-entrance must be a map-connection.

A northern-exit is a kind of place-exit.
A northern-exit must be a northward-passage.
A southern-exit is a kind of place-exit.
A southern-exit must be a southward-passage.
An eastern-exit is a kind of place-exit.
An eastern-exit must be an eastward-passage.
A western-exit is a kind of place-exit.
A western-exit must be a westward-passage.

A map-place may have place-exits.
A map-place may have place-entrances.

A map-connection must have a source-place.
A map-connection must have a target-place.

A source-place must be a map-place.
A target-place must be a map-place.
A map-place with a place-exit is a source-place.
A map-place with a place-entrance is a target-place.

If a map-place north-abuts a map-location, then
 the map-place has a southern-exit;
 also the map-place's southern-exit is a southward-passage;
 also the map-place is the map-location's map-neighbor;
 also the map-location has a northern-exit;
 also the map-location's northern-exit is a northward-passage.

If a map-place is north of a map-location, then
 the map-place north-abuts the map-location.
If a map-place is north of a map-location, then equivalently
 the map-location is the map-place's southern-exit's target-place.
If a map-place is north of a map-location, then equivalently
 the map-place is the map-location's northern-exit's target-place.

If a map-place is south of a map-location, then
 the map-location north-abuts the map-place.
If a map-place is south of a map-location, then equivalently
 the map-location is the map-place's northern-exit's target-place.
If a map-place is south of a map-location, then equivalently
 the map-place is the map-location's southern-exit's target-place.

If a map-place west-abuts a map-location, then
 the map-place has an eastern-exit;
 also the map-place's eastern-exit is an eastward-passage;
 also the map-place is the map-location's map-neighbor;
 also the map-location has a western-exit;
 also the map-location's western-exit is a westward-passage.
 
If a map-place is west of a map-location, then
 the map-place west-abuts the map-location.
If a map-place is west of a map-location, then equivalently
 the map-location is the map-place's eastern-exit's target-place.
If a map-place is west of a map-location, then equivalently
 the map-place is the map-location's western-exit's target-place.

If a map-place is east of a map-location, then
 the map-location west-abuts the map-place.
If a map-place is east of a map-location, then equivalently
 the map-location is the map-place's western-exit's target-place.
If a map-place is east of a map-location, then equivalently
 the map-place is the map-location's eastern-exit's target-place.

A door is a kind of describable-entity.
An exit-door must be a door.
A door-exit must be a map-connection.
A map-connection may have an exit-door.
A door may have door-exits.
A map-connection with an exit-door is a door-exit.
A door must be open or closed.
