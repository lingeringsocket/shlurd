"Resource" import "/snavig/basic-axioms.txt".

A map-direction is a kind of object.
A map-north is a kind of map-direction.
A map-south is a kind of map-direction.
A map-east is a kind of map-direction.
A map-west is a kind of map-direction.

An opposite-direction must be a map-direction.
A map-direction must have an opposite-direction.
A map-direction with an opposite-direction is an opposite-direction.

There is a map-north.
There is a map-south.
The map-north is the map-south's opposite-direction.

There is a map-east.
There is a map-west.
The map-east is the map-west's opposite-direction.

A map-place is a kind of location.
A map-place's place-description must be a quotation.
A map-connection is a kind of describable-entity.
A straight-connection is a kind of map-connection.

A map-neighbor must be a map-place.
A map-place may have map-neighbors.
A map-place with a map-neighbor is a map-neighbor.

A source-place must be a map-place.
A target-place must be a map-place.

A place-exit must be a map-connection.
A place-entrance must be a map-connection.

A map-place may have place-exits.
A map-place may have place-entrances.

A map-connection must have a source-place.
A map-connection must have a target-place.

An opposite-connection must be a map-connection.
A map-connection may have an opposite-connection.
A map-connection with an opposite-connection is an opposite-connection.

A source-place must be a map-place.
A target-place must be a map-place.
A map-place with a place-exit is a source-place.
A map-place with a place-entrance is a target-place.

If a map-connection opposes a map-place to a map-direction, then
 the map-place's place-exit in the map-direction is
  the map-connection's opposite-connection.

If a map-place faces a destination-place to a map-direction, then
 the map-place has a place-exit in the map-direction;
 also the destination-place has a place-exit in the map-direction's opposite-direction;
 also the map-place's place-exit in the map-direction is a straight-connection;
 also the destination-place's place-exit in the map-direction's opposite-direction is
  a straight-connection;
 also the map-place's place-exit in the map-direction opposes
  the destination-place to the map-direction's opposite-direction;
 also the map-place is the destination-place's map-neighbor.

If a map-connection targets a map-place, then equivalently
 the map-connection's target-place is the map-place.

If a map-place is north of a southern-place, then
 the southern-place faces the map-place to the map-north.
If a map-place is north of a southern-place, then equivalently
 the southern-place's place-exit in the map-north targets the map-place.
If a map-place is north of a southern-place, then equivalently
 the map-place's place-exit in the map-south targets the southern-place.

If a map-place is south of a northern-place, then
 the northern-place faces the map-place to the map-south.
If a map-place is south of a northern-place, then equivalently
 the northern-place's place-exit in the map-south targets the map-place.
If a map-place is south of a northern-place, then equivalently
 the map-place's place-exit in the map-north targets the northern-place.

If a map-place is east of a western-place, then
 the western-place faces the map-place to the map-east.
If a map-place is east of a western-place, then equivalently
 the western-place's place-exit in the map-east targets the map-place.
If a map-place is east of a western-place, then equivalently
 the map-place's place-exit in the map-west targets the western-place.

If a map-place is west of an eastern-place, then
 the eastern-place faces the map-place to the map-west.
If a map-place is west of an eastern-place, then equivalently
 the eastern-place's place-exit in the map-west targets the map-place.
If a map-place is west of an eastern-place, then equivalently
 the map-place's place-exit in the map-east targets the eastern-place.

A door is a kind of describable-entity.
An exit-door must be a door.
A door-exit must be a map-connection.
A map-connection may have an exit-door.
A door may have door-exits.
A map-connection with an exit-door is a door-exit.
A door must be open or closed.

If a door mediates a map-connection, then
 the door is the map-connection's exit-door.
